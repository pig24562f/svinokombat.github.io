<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SKURCOIN –ö–ª–∏–∫–µ—Ä</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #1a1a2e;
            color: white;
            text-align: center;
            margin: 0;
            padding: 20px;
            user-select: none;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
            background-color: #16213e;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
        h1 {
            color: #f9c74f;
            margin-bottom: 5px;
        }
        .coin-display {
            font-size: 24px;
            margin: 10px 0;
            color: #f9c74f;
        }
        .clicker {
            width: 250px;
            height: 250px;
            margin: 20px auto;
            cursor: pointer;
            transition: transform 0.1s;
            background-image: url('https://i.ibb.co/S7ZJcBQB/Untitled36-20250719163136.png');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            border-radius: 50%;
            border: 4px solid #f9c74f;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .clicker:active {
            transform: scale(0.95);
        }
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        .stat {
            background-color: #0f3460;
            padding: 10px;
            border-radius: 10px;
            width: 45%;
        }
        .upgrades {
            margin-top: 20px;
        }
        .upgrade {
            background-color: #0f3460;
            padding: 10px;
            margin: 10px 0;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        button {
            background-color: #e94560;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #ff6b81;
        }
        button:disabled {
            background-color: #555;
            cursor: not-allowed;
        }
        .cps {
            font-size: 16px;
            color: #a5a5a5;
            margin-top: 5px;
        }
        .coin-effect {
            position: absolute;
            color: #f9c74f;
            font-weight: bold;
            animation: floatUp 1s forwards;
            pointer-events: none;
            z-index: 100;
        }
        .referral-section {
            margin: 20px 0;
            padding: 15px;
            background-color: #0f3460;
            border-radius: 10px;
        }
        .referral-link {
            word-break: break-all;
            margin: 10px 0;
            padding: 8px;
            background-color: #16213e;
            border-radius: 5px;
        }
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-100px); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SKURCOIN –ö–ª–∏–∫–µ—Ä</h1>
        <div class="coin-display" id="coins">0 SKURCOIN</div>
        <div class="cps" id="cps">0 SKURCOIN/—Å–µ–∫</div>
        
        <div class="clicker" id="clicker"></div>
        
        <div class="referral-section">
            <h3>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h3>
            <p>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∏—Ç–µ x3 –º–Ω–æ–∂–∏—Ç–µ–ª—å –Ω–∞–≤—Å–µ–≥–¥–∞!</p>
            <div class="referral-link" id="referralLink">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏...</div>
            <button id="copyReferralBtn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
            <p id="referralStatus"></p>
        </div>
        
        <div class="stats">
            <div class="stat">
                <h3>–ö–ª–∏–∫–∏</h3>
                <div id="clicks">0</div>
            </div>
            <div class="stat">
                <h3>–ú–Ω–æ–∂–∏—Ç–µ–ª—å</h3>
                <div id="multiplier">x1</div>
            </div>
        </div>
        
        <div class="upgrades">
            <h2>–£–ª—É—á—à–µ–Ω–∏—è</h2>
            <div class="upgrade">
                <div>
                    <h3>–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä</h3>
                    <p>+1 SKURCOIN/—Å–µ–∫</p>
                    <p id="autoClickerLevel">–£—Ä–æ–≤–µ–Ω—å: 0</p>
                </div>
                <button id="buyAutoClicker">–¶–µ–Ω–∞: 270</button>
            </div>
            <div class="upgrade">
                <div>
                    <h3>–£–ª—É—á—à–µ–Ω–Ω—ã–π –∫–ª–∏–∫</h3>
                    <p>+1 –∫ –º–Ω–æ–∂–∏—Ç–µ–ª—é</p>
                    <p id="clickMultiplierLevel">–£—Ä–æ–≤–µ–Ω—å: 0</p>
                </div>
                <button id="buyClickMultiplier">–¶–µ–Ω–∞: 320</button>
            </div>
            <div class="upgrade">
                <div>
                    <h3>–ú–µ–≥–∞ –∫–ª–∏–∫–µ—Ä</h3>
                    <p>+5 SKURCOIN/–∫–ª–∏–∫</p>
                    <p id="megaClickerLevel">–£—Ä–æ–≤–µ–Ω—å: 0</p>
                </div>
                <button id="buyMegaClicker">–¶–µ–Ω–∞: 470</button>
            </div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞
        const BOT_TOKEN = '8113087097:AAE6Fk19ESCGfFEc7xUfbKP3vkzmYvtQnoY';
        const BOT_USERNAME = 'skurclickerbot';
        const tg = window.Telegram.WebApp;

        // Game state
        let gameState = {
            coins: 0,
            clicks: 0,
            baseMultiplier: 1,
            bonusMultiplier: 1,
            autoClickerLevel: 0,
            clickMultiplierLevel: 0,
            megaClickerLevel: 0,
            hasReferralBonus: false,
            referralCode: null,
            referredBy: null
        };

        // –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–¥–æ–≤
        function generateReferralCode() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let code = '';
            for (let i = 0; i < 8; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function initGame() {
            if (!gameState.referralCode) {
                gameState.referralCode = generateReferralCode();
            }

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
            if (tg.initDataUnsafe?.start_param) {
                handleReferral(tg.initDataUnsafe.start_param);
            }

            updateReferralLink();
            loadProgress();
            setupEventListeners();
            updateDisplay();
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
        function handleReferral(refCode) {
            if (refCode !== gameState.referralCode) {
                gameState.referredBy = refCode;
                applyReferralBonus();
                notifyReferrer(refCode);
            }
        }

        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—Å–∏–≤—à–µ–≥–æ
        function notifyReferrer(refCode) {
            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    chat_id: refCode, // –í —Ä–µ–∞–ª—å–Ω–æ–º –±–æ—Ç–µ –Ω—É–∂–Ω–æ —Å–≤—è–∑–∞—Ç—å –∫–æ–¥ —Å ID
                    text: `üéâ –ù–æ–≤—ã–π —Ä–µ—Ñ–µ—Ä–∞–ª! –ö–æ–¥: ${gameState.referralCode}`
                })
            }).catch(e => console.error('–û—à–∏–±–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:', e));
        }

        // –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function updateReferralLink() {
            const link = `https://t.me/${BOT_USERNAME}?start=${gameState.referralCode}`;
            document.getElementById('referralLink').textContent = link;
            
            document.getElementById('copyReferralBtn').addEventListener('click', () => {
                navigator.clipboard.writeText(link);
                const btn = document.getElementById('copyReferralBtn');
                btn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                setTimeout(() => btn.textContent = '–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É', 2000);
            });
        }

        function applyReferralBonus() {
            if (!gameState.hasReferralBonus) {
                gameState.bonusMultiplier = 3;
                gameState.hasReferralBonus = true;
                document.getElementById('referralStatus').textContent = '‚úÖ –í—ã –ø–æ–ª—É—á–∏–ª–∏ x3 –º–Ω–æ–∂–∏—Ç–µ–ª—å!';
                saveProgress();
            }
        }

        // –ò–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å
        function setupEventListeners() {
            document.getElementById('clicker').addEventListener('click', (e) => {
                const value = (1 + gameState.megaClickerLevel * 5) * getMultiplier();
                gameState.coins += value;
                gameState.clicks++;
                
                // –≠—Ñ—Ñ–µ–∫—Ç –∫–ª–∏–∫–∞
                const coin = document.createElement('div');
                coin.className = 'coin-effect';
                coin.textContent = `+${value}`;
                const rect = e.target.getBoundingClientRect();
                coin.style.left = `${e.clientX - rect.left}px`;
                coin.style.top = `${e.clientY - rect.top}px`;
                e.target.appendChild(coin);
                setTimeout(() => coin.remove(), 1000);
                
                saveProgress();
                updateDisplay();
            });

            document.getElementById('buyAutoClicker').addEventListener('click', () => 
                buyUpgrade('autoClicker', 270, 200));
            document.getElementById('buyClickMultiplier').addEventListener('click', () => 
                buyUpgrade('clickMultiplier', 320, 200, () => gameState.baseMultiplier = 1 + gameState.clickMultiplierLevel));
            document.getElementById('buyMegaClicker').addEventListener('click', () => 
                buyUpgrade('megaClicker', 470, 200));
        }

        function buyUpgrade(type, baseCost, costIncrease, onBuy) {
            const cost = baseCost + (gameState[`${type}Level`] * costIncrease);
            if (gameState.coins >= cost) {
                gameState.coins -= cost;
                gameState[`${type}Level`]++;
                if (onBuy) onBuy();
                saveProgress();
                updateDisplay();
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function getMultiplier() {
            return gameState.baseMultiplier * gameState.bonusMultiplier;
        }

        function updateDisplay() {
            document.getElementById('coins').textContent = `${Math.floor(gameState.coins)} SKURCOIN`;
            document.getElementById('clicks').textContent = gameState.clicks;
            document.getElementById('multiplier').textContent = `x${getMultiplier()}${gameState.hasReferralBonus ? ' (x3 —Ä–µ—Ñ)' : ''}`;
            document.getElementById('cps').textContent = `${gameState.autoClickerLevel} SKURCOIN/—Å–µ–∫`;
            
            document.getElementById('autoClickerLevel').textContent = `–£—Ä–æ–≤–µ–Ω—å: ${gameState.autoClickerLevel}`;
            document.getElementById('clickMultiplierLevel').textContent = `–£—Ä–æ–≤–µ–Ω—å: ${gameState.clickMultiplierLevel}`;
            document.getElementById('megaClickerLevel').textContent = `–£—Ä–æ–≤–µ–Ω—å: ${gameState.megaClickerLevel}`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω —Å —É—á–µ—Ç–æ–º –Ω–æ–≤–æ–π —Ñ–æ—Ä–º—É–ª—ã
            document.getElementById('buyAutoClicker').textContent = `–¶–µ–Ω–∞: ${270 + (gameState.autoClickerLevel * 200)}`;
            document.getElementById('buyClickMultiplier').textContent = `–¶–µ–Ω–∞: ${320 + (gameState.clickMultiplierLevel * 200)}`;
            document.getElementById('buyMegaClicker').textContent = `–¶–µ–Ω–∞: ${470 + (gameState.megaClickerLevel * 200)}`;
            
            updateUpgradeButtons();
        }

        function updateUpgradeButtons() {
            document.getElementById('buyAutoClicker').disabled = 
                gameState.coins < (270 + (gameState.autoClickerLevel * 200));
            document.getElementById('buyClickMultiplier').disabled = 
                gameState.coins < (320 + (gameState.clickMultiplierLevel * 200));
            document.getElementById('buyMegaClicker').disabled = 
                gameState.coins < (470 + (gameState.megaClickerLevel * 200));
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞
        function saveProgress() {
            localStorage.setItem(`skurcoin_${gameState.referralCode}`, JSON.stringify(gameState));
        }

        function loadProgress() {
            const saved = localStorage.getItem(`skurcoin_${gameState.referralCode}`);
            if (saved) {
                Object.assign(gameState, JSON.parse(saved));
                if (gameState.hasReferralBonus) {
                    document.getElementById('referralStatus').textContent = '‚úÖ –£ –≤–∞—Å –µ—Å—Ç—å x3 –º–Ω–æ–∂–∏—Ç–µ–ª—å';
                }
            }
        }

        // –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä
        setInterval(() => {
            if (gameState.autoClickerLevel > 0) {
                gameState.coins += gameState.autoClickerLevel * getMultiplier();
                saveProgress();
                updateDisplay();
            }
        }, 1000);

        // –ó–∞–ø—É—Å–∫
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
